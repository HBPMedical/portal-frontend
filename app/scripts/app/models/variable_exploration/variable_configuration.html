<button ng-if="!do_configure" ng-click="set_configure();" class="center-block btn-round" style="display: block">
  <span class="ng-binding">Configure</span>
</button>
<div class="configuration panel closed" ng-class="do_configure ? '' : 'closed'">

  <div class="panel-heading">
    <button ng-click="setVariableSelectedAs('variable', getFocusedVariable())"
            ng-bind="variable_is_used_as('variable') ? 'Remove as Variable' : 'Use as Variable'"
            class="btn variable"></button>
    <button ng-click="setVariableSelectedAs('grouping', getFocusedVariable())"
            ng-class="getFocusedVariable().isGrouping ? '' : 'disabled'"
            ng-bind="variable_is_used_as('grouping') ? 'Remove as Grouping' : 'Use as Grouping'"
            class="btn grouping"></button>
    <button ng-click="setVariableSelectedAs('covariable', getFocusedVariable())"
            ng-bind="variable_is_used_as('covariable') ? 'Remove as Covariable' : 'Use as Covariable'"
            class="btn covariable"></button>
    <button ng-click="setVariableSelectedAs('filter', getFocusedVariable())"
            ng-bind="variable_is_used_as('filter') ? 'Remove as Filter' : 'Use as Filter'"
            class="btn filter"></button>
  </div>

  <div class="panel-body">
    <div class="row" style="margin: -16px">

      <div class="col-xs-3 form-conf variable transparent">
        <h3>Variable</h3>
        <div ng-repeat="(code, variable) in configuration.variable"  class="text-nowrap overflow-hidden">
          <a ng-click="setVariableSelectedAs('variable', variable)" class="btn btn-default btn-xs"><i class="ti ti-close"></i></a>
          <a ng-bind="variable.label" ng-click="setFocusedVariable(variable)"></a>
        </div>
      </div>

      <div class="col-xs-3 form-conf grouping transparent">
        <h3>Grouping</h3>

        <div ng-repeat="(code, variable) in configuration.grouping" class="text-nowrap overflow-hidden">
          <a ng-click="setVariableSelectedAs('grouping', variable)" class="btn btn-default btn-xs"><i class="ti ti-close"></i></a>
          <a ng-bind="variable.label" ng-click="setFocusedVariable(variable)"></a>
        </div>
      </div>

      <div class="col-xs-3 form-conf covariable transparent">
        <h3>Covariable</h3>
        <div ng-repeat="(code, variable) in configuration.covariable"  class="text-nowrap overflow-hidden">
          <a ng-click="setVariableSelectedAs('covariable', variable)" class="btn btn-default btn-xs"><i class="ti ti-close"></i></a>
          <a ng-bind="variable.label" ng-click="setFocusedVariable(variable)"></a>
        </div>
      </div>

      <div class="col-xs-3 form-conf filter transparent">
        <h3>Filters</h3>
        <div ng-repeat="(code, variable) in configuration.filter" class="text-nowrap overflow-hidden">
          <a ng-click="setVariableSelectedAs('filter', variable)" class="btn btn-default btn-xs"><i class="ti ti-close"></i></a>
          <a ng-bind="variable.label" ng-click="setFocusedVariable(variable)"></a>
        </div>
      </div>
    </div>

  </div>
</div>
