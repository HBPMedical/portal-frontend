<form>
  <div class="panel">
    <div class="panel-heading">
      Your Experiment
    </div>
    <div class="panel-body">

      <div ng-if="shared.experiment_configuration.length == 0">
        <p>
          Pick a ML algorithm on the left and add it here to create an experiment
        </p>
      </div>

      <div ng-if="shared.experiment_configuration.length > 0">

        <ul>
          <li ng-repeat="experiment in shared.experiment_configuration track by $index">
            <div style="max-width: calc(100% - 20px); display: inline-block; vertical-align: top">
              <span ng-bind="experiment.label"></span>
              <span ng-if="experiment.parameters.length">
                with
                <span ng-repeat="parameter in experiment.parameters">
                  <span ng-bind="parameter.label + '=' + parameter.value"></span><span ng-if="$index != experiment.parameters.length - 1">, </span>
                </span>
              </span>
            </div>

            <a ng-click="shared.experiment_configuration.splice($index, 1)"
               style="margin-top: 2px"
               class="btn btn-xs btn-default fa fa-remove pull-right"></a>
          </li>

        </ul>

        <div class="form-group">
          <label for="kfold">K-Fold: </label>
          <div class="input-group">
            <input id="kfold" ng-model="shared.kfold" step="1" min="1" class="form-control" type="number"/>
            <div class="input-group-addon fa fa-question-circle"
                 popover-title="K-fold cross validation"
                 popover-placement="left"
                 popover-append-to-body="true"
                 popover="Defines the number of folds used in the cross-validation. Typical numbers are 2 or 10. More information: https://en.wikipedia.org/wiki/Cross-validation_(statistics)"></div>
          </div>
        </div>

        <div class="form-group">
          <label for="name">Name: </label>
          <div class="input-group">
            <input id="name" ng-model="shared.experiment_name" class="form-control" type="text"/>
            <div class="input-group-addon fa fa-question-circle"
                 popover-placement="left"
                 popover-append-to-body="true"
                 popover="The name of the experiment, for other humans"></div>
          </div>
        </div>

        <button class="btn btn-primary pull-right"
                ng-if="!running"
                ng-click="run_experiment()"
                ng-class="{'disabled' : !shared.experiment_name || !shared.kfold}">
          Run experiment
        </button>

        <button class="btn btn-primary pull-right disabled"
                ng-if="running">
          <span class="fa fa-spinner fa-spin"></span>
          Starting experiment
        </button>
      </div>

    </div>
  </div>
</form>
